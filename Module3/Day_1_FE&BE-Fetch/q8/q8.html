<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
     <h2>Todo List</h2>
    <div id="todo-container"></div>
</body>
<script>
    // ---- FETCH TODOS (Only first 20) ----
async function fetchAndStoreTodos() {
    try {
        let res = await fetch("https://jsonplaceholder.typicode.com/todos");
        let data = await res.json();

        let first20 = data.slice(0, 20);

        localStorage.setItem("todos", JSON.stringify(first20));

        renderTodos();
    } catch (error) {
        console.log("Error:", error);
    }
}

// ---- GET FROM LOCAL STORAGE ----
function getTodosFromLocal() {
    return JSON.parse(localStorage.getItem("todos")) || [];
}

// ---- RENDER TODOS ----
function renderTodos() {
    let todos = getTodosFromLocal();
    let container = document.getElementById("todo-container");

    container.innerHTML = ""; // clear UI

    todos.forEach((todo) => {
        let card = document.createElement("div");
        card.className = "todo-card";

        card.innerHTML = `
            <h3>${todo.title}</h3>
            <p>Status: <strong>${todo.completed ? "Completed" : "Pending"}</strong></p>
            <button onclick="deleteTodo(${todo.id})">Delete</button>
        `;

        container.appendChild(card);
    });
}

// ---- DELETE TODO ----
function deleteTodo(id) {
    let todos = getTodosFromLocal();

    let updated = todos.filter((todo) => todo.id !== id);

    localStorage.setItem("todos", JSON.stringify(updated));

    renderTodos(); // re-render without reload
}

// ---- INITIAL CALL ----
fetchAndStoreTodos();

    </script>
</html>